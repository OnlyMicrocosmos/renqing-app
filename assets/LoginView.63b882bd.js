import{_ as g,m as w,b as h,r as i,p as y,o as k,q as x,e as u,f as d,h as s,x as V,j as m,y as v,z as S,A as p,t as M,B as C,i as L,C as B}from"./index.45b4ffe3.js";const I={class:"auth-view"},N={class:"auth-container"},U={class:"form-group"},q={class:"form-group"},A={class:"form-group checkbox-group"},D={class:"checkbox-label"},T={key:0,class:"error-message"},j=["disabled"],z={key:0},E={key:1},R={class:"auth-footer"},F={__name:"LoginView",setup(G){const c=w(),_=h(),l=i(!1),n=i(!1),t=i(""),o=y({username:"",password:""});k(()=>{const r=localStorage.getItem("remembered-username");r&&(o.username=r,n.value=!0)});const f=async()=>{if(!o.username||!o.password){t.value="\u8BF7\u8F93\u5165\u7528\u6237\u540D/\u90AE\u7BB1\u548C\u5BC6\u7801";return}l.value=!0,t.value="";try{await _.login({username:o.username,password:o.password}),n.value?localStorage.setItem("remembered-username",o.username):localStorage.removeItem("remembered-username"),c.push("/dashboard")}catch(r){t.value=r.message||"\u767B\u5F55\u5931\u8D25: \u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF"}finally{l.value=!1}};return(r,e)=>{const b=x("router-link");return u(),d("div",I,[s("div",N,[e[10]||(e[10]=s("div",{class:"auth-header"},[s("h1",null,"\u6B22\u8FCE\u56DE\u6765"),s("p",null,"\u767B\u5F55\u60A8\u7684\u8D26\u6237\u4EE5\u7EE7\u7EED")],-1)),s("form",{onSubmit:V(f,["prevent"]),class:"auth-form"},[s("div",U,[e[3]||(e[3]=s("label",{for:"username"},"\u7528\u6237\u540D\u6216\u90AE\u7BB1",-1)),m(s("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=a=>o.username=a),type:"text",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u6216\u90AE\u7BB1",class:"form-control",required:""},null,512),[[v,o.username]])]),s("div",q,[e[4]||(e[4]=s("label",{for:"password"},"\u5BC6\u7801",-1)),m(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=a=>o.password=a),type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",class:"form-control",required:""},null,512),[[v,o.password]])]),s("div",A,[s("label",D,[m(s("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>n.value=a)},null,512),[[S,n.value]]),e[5]||(e[5]=s("span",{class:"checkmark"},null,-1)),e[6]||(e[6]=p(" \u8BB0\u4F4F\u6211 ",-1))]),e[7]||(e[7]=s("a",{href:"#",class:"forgot-password"},"\u5FD8\u8BB0\u5BC6\u7801\uFF1F",-1))]),t.value?(u(),d("div",T,M(t.value),1)):C("",!0),s("button",{type:"submit",class:"btn btn-primary btn-block",disabled:l.value},[l.value?(u(),d("span",z,"\u767B\u5F55\u4E2D...")):(u(),d("span",E,"\u767B\u5F55"))],8,j)],32),s("div",R,[s("p",null,[e[9]||(e[9]=p("\u8FD8\u6CA1\u6709\u8D26\u6237\uFF1F ",-1)),L(b,{to:"/register"},{default:B(()=>e[8]||(e[8]=[p("\u7ACB\u5373\u6CE8\u518C",-1)])),_:1,__:[8]})])])])])}}};var J=g(F,[["__scopeId","data-v-5e041fd1"],["__file","LoginView.vue"]]);export{J as default};
