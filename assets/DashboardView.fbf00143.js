import{_ as h,u as D,b as g,o as w,n as y,w as b,c as n,r as V,e as k,f as B,h as a,t as r,i as d,j as R,v as S}from"./index.dca31d16.js";import{useContactStore as T}from"./contact.store.3ccc7ae8.js";import{B as x,T as E}from"./TimelineChart.114bbb04.js";const Y={class:"dashboard"},C={class:"cards"},F={class:"card"},M={class:"card"},N={class:"card"},j={class:"charts"},A={class:"chart-container"},G={class:"chart-container"},I={class:"time-range"},U={__name:"DashboardView",setup(q){const s=D();T(),g();const v=async()=>{await s.loadEvents()};w(async()=>{await v(),await y()}),b(()=>s.events,t=>{t.length>0&&console.log("\u4E8B\u4EF6\u6570\u636E\u5DF2\u66F4\u65B0:",t)},{deep:!0});const i=n(()=>s.events.filter(t=>t.type==="received").reduce((t,e)=>t+(e.amount||0),0)),u=n(()=>s.events.filter(t=>t.type==="given").reduce((t,e)=>t+(e.amount||0),0)),c=n(()=>i.value-u.value),p=n(()=>({received:i.value,given:u.value})),_=n(()=>s.events.filter(t=>t.type==="given"&&!t.isReturned).reduce((t,e)=>t+(e.amount||0),0)),f=n(()=>s.events.filter(t=>t.type==="received"&&!t.isReturned).reduce((t,e)=>t+(e.amount||0),0)),o=V("last30days"),m=n(()=>{const t=new Date,e=new Date(t);switch(o.value){case"last30days":e.setDate(t.getDate()-30);break;case"last90days":e.setDate(t.getDate()-90);break;case"thisYear":e.setFullYear(t.getFullYear()-1);break;default:return s.events}return s.events.filter(l=>new Date(l.date)>=e)});return(t,e)=>(k(),B("div",Y,[e[7]||(e[7]=a("h1",null,"\u4EEA\u8868\u76D8",-1)),e[8]||(e[8]=a("p",null,"\u60A8\u7684\u4EBA\u60C5\u5F80\u6765\u6982\u89C8",-1)),a("div",C,[a("div",F,[e[1]||(e[1]=a("h3",null,"\u603B\u4EBA\u60C5\u503C",-1)),a("p",null,"\xA5"+r(c.value),1)]),a("div",M,[e[2]||(e[2]=a("h3",null,"\u5DF2\u9001\u4EBA\u60C5",-1)),a("p",null,"\xA5"+r(_.value),1)]),a("div",N,[e[3]||(e[3]=a("h3",null,"\u5F85\u8FD8\u4EBA\u60C5",-1)),a("p",null,"\xA5"+r(f.value),1)])]),a("div",j,[a("div",A,[e[4]||(e[4]=a("h3",null,"\u4EBA\u60C5\u6536\u652F\u5E73\u8861",-1)),d(x,{data:p.value},null,8,["data"])]),a("div",G,[e[6]||(e[6]=a("h3",null,"\u4EBA\u60C5\u4E8B\u4EF6\u65F6\u95F4\u7EBF",-1)),a("div",I,[R(a("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l)},e[5]||(e[5]=[a("option",{value:"last30days"},"\u6700\u8FD130\u5929",-1),a("option",{value:"last90days"},"\u6700\u8FD190\u5929",-1),a("option",{value:"thisYear"},"\u4ECA\u5E74",-1)]),512),[[S,o.value]])]),d(E,{events:m.value},null,8,["events"])])])]))}};var L=h(U,[["__scopeId","data-v-2d2391e0"],["__file","DashboardView.vue"]]);export{L as default};
